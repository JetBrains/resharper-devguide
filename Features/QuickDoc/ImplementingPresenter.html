


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title> / ReSharper  DevGuide</title>
    <link rel="stylesheet" href="/resharper/devguide/app/css/styles.min.css">

    <!-- non-retina iPad pre iOS 7 -->
    <link rel="apple-touch-icon" href="/resharper/devguide/apple-touch-icon-72x72.png" sizes="72x72">

    <!-- retina iPhone pre iOS 7 -->
    <link rel="apple-touch-icon" href="/resharper/devguide/apple-touch-icon-114x114.png" sizes="114x114">

    <!-- retina iPad pre iOS 7 -->
    <link rel="apple-touch-icon" href="/resharper/devguide/apple-touch-icon-144x144.png" sizes="144x144">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/resharper/devguide/apple-touch-icon-precomposed.png">

    <!-- normal favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/resharper/devguide/favicon.ico">
    <link rel="icon" type="image/png" href="/resharper/devguide/favicon.png">
<link  rel="stylesheet" href="/resharper/devguide/styles/styles.css"></head>
<body data-id="Features/QuickDoc/ImplementingPresenter">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a href="https://youtrack.jetbrains.com/issues/IJSDK">Send feedback</a></p>
                <p>&copy; 2000&ndash;2015 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>ReSharper DevGuide</h3>
                
        <div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1">
            <option data-group="primary" value="default" selected>Default</option>
            <option data-group="primary" value="default_for_gnome">GNOME</option>
            <option data-group="primary" value="default_for_kde">KDE</option>
            <option data-group="primary" value="default_for_xwin">XWindow</option>
            <option data-group="primary" value="emacs">Emacs</option>
            <option data-group="primary" value="jbuilder">JBuilder</option>
            <option data-group="primary" value="visual_studio">Visual Studio</option>
            <option data-group="primary" value="netbeans_6.5">NetBeans 6.5</option>
            <option data-group="primary" value="eclipse">Eclipse</option>
            <option data-group="secondary" value="mac_os_x_10.5_">OS X 10.5+</option>
            <option data-group="secondary" value="mac_os_x">OS X</option>
            <option data-group="secondary" value="eclipse_mac_os_x">OS X Eclipse</option></select>
        </div>
    
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">

                    
                    <a name="implementing-iquickdocpresenter" class="elem-anchor"></a>
<h1>Implementing IQuickDocPresenter<a href="#implementing-iquickdocpresenter" class="anchor-link"><span></span></a></h1>

<p>Once a provider has identified an element that it can generate documentation for, it creates an instance of <code class="code highlight language-text">IQuickDocPresenter</code>, which is responsible for generating the documentation. It has the following methods:</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_csharp"><span class="k">public</span> <span class="k">interface</span> <span class="n">IQuickDocPresenter</span>
<span class="p">{</span>
  <span class="kt">string</span> <span class="nf">GetHtml</span><span class="p">(</span><span class="n">PsiLanguageType</span> <span class="n">presentationLanguage</span><span class="p">);</span>
<span class="na">  [CanBeNull]</span> <span class="kt">string</span> <span class="n">GetId</span><span class="p">();</span>
<span class="na">  [CanBeNull]</span> <span class="n">IQuickDocPresenter</span> <span class="n">Resolve</span><span class="p">(</span><span class="kt">string</span> <span class="n">id</span><span class="p">);</span>
  <span class="k">void</span> <span class="nf">OpenInEditor</span><span class="p">();</span>
  <span class="k">void</span> <span class="nf">ReadMore</span><span class="p">();</span>
<span class="p">}</span></code></pre>

<p>The <strong><code class="code highlight language-text">GetId</code></strong> method returns the ID of the current code element being displayed. This may be an XML Doc Comment ID, a simple ID, or even <code class="code highlight language-text">null</code>. It is intended to be used when displaying the name of the code element, or as diagnostics in the case of failure. For example, if <code class="code highlight language-text">GetHtml</code> returns null, the ID is used in a message of “no documentation available for {ID}”.</p>

<p><strong><code class="code highlight language-text">Resolve</code></strong> will create a new instance of <code class="code highlight language-text">IQuickDocPresenter</code> to allow navigation from one code element to another. For example, a C# QuickDoc window for a method can show parameter and return types as hyperlinks. Clicking these will change the content of the QuickDoc view to that of the new type. Typically, this method is very similar to <code class="code highlight language-text">IQuickDocProvider.Resolve</code> and some of the default providers actually call a <code class="code highlight language-text">Resolve</code> overload on their creating provider. Alternatively, if it’s a CLR based language, it can be deferred to an instance of <code class="code highlight language-text">QuickDocTypeMemberProvider</code>, which will treat the passed in code element ID as a CLR XML Doc Comment ID. If the presenter doesn’t support navigation, or cannot navigate to the item, it can return <code class="code highlight language-text">null</code>, in which case, it should not add hyperlinks to the HTML.</p>

<p>The <strong><code class="code highlight language-text">OpenInEditor</code></strong> and <strong><code class="code highlight language-text">ReadMore</code></strong> methods are called in response to the “go to” or “read more” hyperlinks added to the default HTML template. When the user clicks the hyperlink, the current presenter’s <code class="code highlight language-text">Resolve</code> method is called to find the presenter for the target, and the new presenter’s <code class="code highlight language-text">OpenInEditor</code> or <code class="code highlight language-text">ReadMore</code> method is called. <code class="code highlight language-text">OpenInEditor</code> is also called if the user holds down <code class="code highlight language-text">Ctrl</code> when clicking a type definition hyperlink.</p>

<p><code class="code highlight language-text">ReadMore</code> is expected to open further documentation. It can do this with a simple call to <code class="code highlight language-text">Process.Start</code>, passing in a URL to spawn the system browser, or using the <code class="code highlight language-text">HelpSystem</code> component to display product or MSDN documentation (again extensible by implementing <code class="code highlight language-text">IShowHelp</code>).</p>

<p>The most important method is <strong><code class="code highlight language-text">GetHtml</code></strong>. The string returned from this method is displayed verbatim in a web browser control. If the current code element doesn’t have any documentation, or the documentation cannot be created, this method should return <code class="code highlight language-text">null</code>, in which case a fallback message, such as “no documentation available for {ID}” is displayed.</p>

<aside class="note">
  <p> It is the responsibility of the <code class="code highlight language-text">IQuickDocPresenter</code> to ensure the HTML is properly sanitised before display (see <a href="http://youtrack.jetbrains.com/issue/RSRP-186295" data-bypass="yes"><span>RSRP-186295</span></a> for a great reason why!). Using the helper classes mentioned below can help with this, particularly <code class="code highlight language-text">XmlDocPresenterUtil.EscapeHtmlString</code></p>
</aside>

<p>ReSharper provides a couple of classes to help build the HTML - <strong><code class="code highlight language-text">XmlDocHtmlUtil</code></strong> and <strong><code class="code highlight language-text">XmlDocHtmlPresenter</code></strong>. Typically, the presenter will generate the HTML by calling <code class="code highlight language-text">XmlDocHtmlPresenter.Run</code> which in turn calls methods on <code class="code highlight language-text">XmlDocHtmlUtil</code>, such as <code class="code highlight language-text">XmlDocHtmlUtil.BuildHtml</code>, although the presenter is free to call <code class="code highlight language-text">XmlDocHtmlUtil</code> directly, or create the HTML itself. It is, however, recommended to use the helper classes).</p>


                    <div class="last-modified">
                        Last modified: 8 May 2015
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>


<script data-main="/resharper/devguide/app/js/main.build" data-baseurl="/resharper/devguide/" src="/resharper/devguide/app/js/vendor/requirejs/require.js"></script>

</body>
</html>

